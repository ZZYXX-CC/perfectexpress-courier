module.exports=[31726,a=>{"use strict";var b=a.i(37936),c=a.i(22176),d=a.i(18558);async function e(a,b){let d=await (0,c.createClient)(),{data:{user:e}}=await d.auth.getUser(),{data:f,error:g}=await d.from("chat_sessions").insert({visitor_name:a,visitor_email:b,user_id:e?.id||null,status:"active"}).select().single();return g?(console.error("Error creating chat session:",g),{error:g.message}):{success:!0,session:f}}async function f(a){let b=await (0,c.createClient)(),{data:d,error:e}=await b.from("chat_sessions").select("*").eq("id",a).single();return e?(console.error("Error fetching chat session:",e),null):d}async function g(){let a=await (0,c.createClient)(),{data:b,error:d}=await a.from("chat_sessions").select("*").order("last_message_at",{ascending:!1});return d?(console.error("Error fetching chat sessions:",d),[]):b}async function h(a,b,d,e){let f=await (0,c.createClient)(),{data:g,error:h}=await f.from("chat_messages").insert({session_id:a,sender_type:d,sender_name:e,message:b}).select().single();return h?(console.error("Error sending message:",h),{error:h.message}):{success:!0,message:g}}async function i(a){let b=await (0,c.createClient)(),{data:d,error:e}=await b.from("chat_messages").select("*").eq("session_id",a).order("created_at",{ascending:!0});return e?(console.error("Error fetching messages:",e),[]):d}async function j(a){let b=await (0,c.createClient)(),{error:e}=await b.from("chat_sessions").update({status:"closed",updated_at:new Date().toISOString()}).eq("id",a);return e?(console.error("Error closing chat session:",e),{error:e.message}):((0,d.revalidatePath)("/admin/chat"),{success:!0})}async function k(a){let b=await (0,c.createClient)();return await b.from("chat_messages").update({is_read:!0}).eq("session_id",a).eq("sender_type","visitor").eq("is_read",!1),await b.from("chat_sessions").update({unread_count:0}).eq("id",a),{success:!0}}(0,a.i(13095).ensureServerEntryExports)([e,f,g,h,i,j,k]),(0,b.registerServerReference)(e,"601a54e1e61ebec4ee8d22d385482431483c383d59",null),(0,b.registerServerReference)(f,"40ae27ffaf22b8950880e72d49cdd11a2f48da0940",null),(0,b.registerServerReference)(g,"009a18ceb083bab5ad24884d10753cc89c6b893002",null),(0,b.registerServerReference)(h,"781dce578e8850f3344c600f141f5999ba6b9b7064",null),(0,b.registerServerReference)(i,"4025a0ee08735742c2e4d64b5ee759f70a786392ad",null),(0,b.registerServerReference)(j,"40ceed2991eeb6f8616fabb5f58d0ee2f68e273e4d",null),(0,b.registerServerReference)(k,"40007ca5d3341f9372d0ec690a3592d7880edcaa5e",null),a.s(["closeChatSession",()=>j,"createChatSession",()=>e,"getActiveChatSessions",()=>g,"getChatMessages",()=>i,"markMessagesAsRead",()=>k,"sendChatMessage",()=>h])},21525,a=>{"use strict";var b=a.i(31726);a.s([],56123),a.i(56123),a.s(["4025a0ee08735742c2e4d64b5ee759f70a786392ad",()=>b.getChatMessages,"601a54e1e61ebec4ee8d22d385482431483c383d59",()=>b.createChatSession,"781dce578e8850f3344c600f141f5999ba6b9b7064",()=>b.sendChatMessage],21525)}];

//# sourceMappingURL=_1a8956a5._.js.map