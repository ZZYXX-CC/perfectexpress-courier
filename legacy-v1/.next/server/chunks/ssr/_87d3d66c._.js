module.exports=[31726,a=>{"use strict";var b=a.i(37936),c=a.i(22176),d=a.i(18558);async function e(a,b){let d=await (0,c.createClient)(),{data:{user:e}}=await d.auth.getUser(),{data:f,error:g}=await d.from("chat_sessions").insert({visitor_name:a,visitor_email:b,user_id:e?.id||null,status:"active"}).select().single();return g?(console.error("Error creating chat session:",g),{error:g.message}):{success:!0,session:f}}async function f(a){let b=await (0,c.createClient)(),{data:d,error:e}=await b.from("chat_sessions").select("*").eq("id",a).single();return e?(console.error("Error fetching chat session:",e),null):d}async function g(){let a=await (0,c.createClient)(),{data:b,error:d}=await a.from("chat_sessions").select("*").order("last_message_at",{ascending:!1});return d?(console.error("Error fetching chat sessions:",d),[]):b}async function h(a,b,d,e){let f=await (0,c.createClient)(),{data:g,error:h}=await f.from("chat_messages").insert({session_id:a,sender_type:d,sender_name:e,message:b}).select().single();return h?(console.error("Error sending message:",h),{error:h.message}):{success:!0,message:g}}async function i(a){let b=await (0,c.createClient)(),{data:d,error:e}=await b.from("chat_messages").select("*").eq("session_id",a).order("created_at",{ascending:!0});return e?(console.error("Error fetching messages:",e),[]):d}async function j(a){let b=await (0,c.createClient)(),{error:e}=await b.from("chat_sessions").update({status:"closed",updated_at:new Date().toISOString()}).eq("id",a);return e?(console.error("Error closing chat session:",e),{error:e.message}):((0,d.revalidatePath)("/admin/chat"),{success:!0})}async function k(a){let b=await (0,c.createClient)();return await b.from("chat_messages").update({is_read:!0}).eq("session_id",a).eq("sender_type","visitor").eq("is_read",!1),await b.from("chat_sessions").update({unread_count:0}).eq("id",a),{success:!0}}(0,a.i(13095).ensureServerEntryExports)([e,f,g,h,i,j,k]),(0,b.registerServerReference)(e,"601a54e1e61ebec4ee8d22d385482431483c383d59",null),(0,b.registerServerReference)(f,"40ae27ffaf22b8950880e72d49cdd11a2f48da0940",null),(0,b.registerServerReference)(g,"009a18ceb083bab5ad24884d10753cc89c6b893002",null),(0,b.registerServerReference)(h,"781dce578e8850f3344c600f141f5999ba6b9b7064",null),(0,b.registerServerReference)(i,"4025a0ee08735742c2e4d64b5ee759f70a786392ad",null),(0,b.registerServerReference)(j,"40ceed2991eeb6f8616fabb5f58d0ee2f68e273e4d",null),(0,b.registerServerReference)(k,"40007ca5d3341f9372d0ec690a3592d7880edcaa5e",null),a.s(["closeChatSession",()=>j,"createChatSession",()=>e,"getActiveChatSessions",()=>g,"getChatMessages",()=>i,"markMessagesAsRead",()=>k,"sendChatMessage",()=>h])},89406,a=>{"use strict";var b=a.i(31726),c=a.i(19789);a.s([],8061),a.i(8061),a.s(["002f5ed4f625427543c2a6a5db3b9cb3d969f79799",()=>c.getUserProfile,"007341bb103b370054f6b9cc33ac33224b9dcff7e2",()=>c.getUser,"008503b81149d7817e0f43f961b36699ad4a34baab",()=>c.signOut,"00d8e0eef0f934d18a328f07cb46d0ad918bd58fa0",()=>c.isAdmin,"40084c06809d3ca4b7b6159e737657d178bb309475",()=>c.resetPassword,"40213a1e3093de513f699db95f31707c4f8426fa2e",()=>c.signUp,"4025a0ee08735742c2e4d64b5ee759f70a786392ad",()=>b.getChatMessages,"4028fd0ec15a845b2972c9f920209bd381d23f23ea",()=>c.getUserShipments,"404315f94ff57c0f21b673c3d120c11a11c6bf0faa",()=>c.signIn,"407ae9ffba7e0dd474adf70fd00f2febfc97c1be34",()=>c.updateEmail,"40a5b5fe51690aef9e38cb0009c0260ed0cb580ff0",()=>c.updateProfile,"40bf41dfbd186604dfd48d38b0aa3e61454ac7027a",()=>c.requestPasswordReset,"601a54e1e61ebec4ee8d22d385482431483c383d59",()=>b.createChatSession,"60af25071d0248e87884adb790be360bf76e96f082",()=>c.changePassword,"781dce578e8850f3344c600f141f5999ba6b9b7064",()=>b.sendChatMessage],89406)}];

//# sourceMappingURL=_87d3d66c._.js.map