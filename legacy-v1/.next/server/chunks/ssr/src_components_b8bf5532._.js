module.exports=[26419,a=>{"use strict";var b=a.i(87924),c=a.i(67511),c=c,d=a.i(70106);let e=(0,d.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var f=a.i(4650),f=f;let g=(0,d.default)("octagon-x",[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),h=(0,d.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var i=a.i(72131),j=(a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}},k=i.createContext(void 0),l={setTheme:a=>{},themes:[]};i.memo(({forcedTheme:a,storageKey:b,attribute:c,enableSystem:d,enableColorScheme:e,defaultTheme:f,value:g,themes:h,nonce:k,scriptProps:l})=>{let m=JSON.stringify([c,b,f,a,h,g,d,e]).slice(1,-1);return i.createElement("script",{...l,suppressHydrationWarning:!0,nonce:k,dangerouslySetInnerHTML:{__html:`(${j.toString()})(${m})`}})});var m=a.i(23292);let n=({...a})=>{var d;let{theme:j="system"}=null!=(d=i.useContext(k))?d:l;return(0,b.jsx)(m.Toaster,{theme:j,className:"toaster group",icons:{success:(0,b.jsx)(c.default,{className:"size-4"}),info:(0,b.jsx)(e,{className:"size-4"}),warning:(0,b.jsx)(h,{className:"size-4"}),error:(0,b.jsx)(g,{className:"size-4"}),loading:(0,b.jsx)(f.default,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...a})};a.s(["Toaster",()=>n],26419)},10620,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(72036),e=a.i(5050);let f=(0,e.createServerReference)("601a54e1e61ebec4ee8d22d385482431483c383d59",e.callServer,void 0,e.findSourceMapURL,"createChatSession");var g=a.i(3143),h=a.i(93319),i=a.i(99570),j=a.i(66718),k=a.i(70430),l=a.i(91119),m=a.i(23292),n=a.i(45222),o=a.i(33508),p=a.i(92759),q=a.i(96221);let r=(0,a.i(70106).default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]);function s(){let[a,e]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(!1),K=(0,c.useRef)(null),L=(0,d.createClient)(),M=async a=>{B(!0),x(await (0,h.getChatMessages)(a)),B(!1)};(0,c.useEffect)(()=>{K.current?.scrollIntoView({behavior:"smooth"})},[w]),(0,c.useEffect)(()=>{let a=localStorage.getItem("chatSessionId"),b=localStorage.getItem("chatVisitorName"),c=localStorage.getItem("chatVisitorEmail");a&&b&&c&&(v(a),F(b),H(c),J(!0),M(a))},[]),(0,c.useEffect)(()=>{if(!u)return;let b=L.channel(`chat-${u}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`session_id=eq.${u}`},b=>{let c=b.new;x(a=>a.some(a=>a.id===c.id)?a:[...a,c]),"admin"!==c.sender_type||a||m.toast.info("New message from support!",{action:{label:"View",onClick:()=>{e(!0),t(!1)}}})}).subscribe();return()=>{L.removeChannel(b)}},[u,L,a]);let N=async a=>{if(a.preventDefault(),!E.trim()||!G.trim())return void m.toast.error("Please enter your name and email");B(!0);let b=await f(E,G);if(b.error){m.toast.error(b.error),B(!1);return}b.session&&(v(b.session.id),J(!0),localStorage.setItem("chatSessionId",b.session.id),localStorage.setItem("chatVisitorName",E),localStorage.setItem("chatVisitorEmail",G),m.toast.success("Chat started! An agent will be with you shortly.")),B(!1)},O=async a=>{if(a.preventDefault(),!y.trim()||!u)return;D(!0);let b=await (0,g.sendChatMessage)(u,y,"visitor",E);b.error?m.toast.error(b.error):z(""),D(!1)};return a?(0,b.jsx)("div",{className:`fixed bottom-6 right-6 z-50 transition-all ${s?"w-72":"w-80 sm:w-96"}`,children:(0,b.jsxs)(l.Card,{className:"shadow-2xl border-0 overflow-hidden",children:[(0,b.jsxs)(l.CardHeader,{className:"bg-primary text-white p-4 flex flex-row items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.MessageCircle,{size:20}),(0,b.jsx)(l.CardTitle,{className:"text-base font-semibold",children:"Live Support"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:()=>t(!s),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:(0,b.jsx)(r,{size:16})}),(0,b.jsx)("button",{onClick:()=>e(!1),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:(0,b.jsx)(o.X,{size:16})})]})]}),!s&&(0,b.jsx)(l.CardContent,{className:"p-0",children:I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"h-80 overflow-y-auto p-4 space-y-3 bg-slate-50",children:[A?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)(q.Loader2,{className:"h-6 w-6 animate-spin text-slate-400"})}):0===w.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 text-sm",children:[(0,b.jsx)(n.MessageCircle,{size:32,className:"mb-2 opacity-50"}),(0,b.jsx)("p",{children:"No messages yet"}),(0,b.jsx)("p",{children:"Send a message to start the conversation"})]}):w.map(a=>(0,b.jsx)("div",{className:`flex ${"visitor"===a.sender_type?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${"visitor"===a.sender_type?"bg-primary text-white rounded-br-md":"bg-white text-slate-800 shadow-sm border rounded-bl-md"}`,children:["admin"===a.sender_type&&(0,b.jsx)("p",{className:"text-xs text-primary font-medium mb-1",children:a.sender_name||"Support"}),(0,b.jsx)("p",{className:"text-sm",children:a.message}),(0,b.jsx)("p",{className:`text-xs mt-1 ${"visitor"===a.sender_type?"text-white/70":"text-slate-400"}`,children:new Date(a.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},a.id)),(0,b.jsx)("div",{ref:K})]}),(0,b.jsxs)("form",{onSubmit:O,className:"p-3 border-t bg-white flex gap-2",children:[(0,b.jsx)(j.Input,{value:y,onChange:a=>z(a.target.value),placeholder:"Type a message...",className:"flex-1",disabled:C}),(0,b.jsx)(i.Button,{type:"submit",size:"icon",disabled:C||!y.trim(),children:C?(0,b.jsx)(q.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(p.Send,{size:18})})]}),(0,b.jsx)("div",{className:"p-2 border-t bg-slate-50",children:(0,b.jsx)("button",{onClick:()=>{localStorage.removeItem("chatSessionId"),localStorage.removeItem("chatVisitorName"),localStorage.removeItem("chatVisitorEmail"),v(null),J(!1),x([]),F(""),H(""),e(!1)},className:"w-full text-xs text-slate-500 hover:text-red-500 transition-colors",children:"End Chat Session"})})]}):(0,b.jsxs)("form",{onSubmit:N,className:"p-4 space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Please provide your details to start chatting with our support team."}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"chat-name",children:"Full Name"}),(0,b.jsx)(j.Input,{id:"chat-name",value:E,onChange:a=>F(a.target.value),placeholder:"John Doe",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"chat-email",children:"Email"}),(0,b.jsx)(j.Input,{id:"chat-email",type:"email",value:G,onChange:a=>H(a.target.value),placeholder:"john@example.com",required:!0})]}),(0,b.jsx)(i.Button,{type:"submit",className:"w-full",disabled:A,children:A?(0,b.jsx)(q.Loader2,{className:"h-4 w-4 animate-spin"}):"Start Chat"})]})})]})}):(0,b.jsxs)("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary text-white rounded-full shadow-lg hover:bg-primary/90 transition-all hover:scale-105 flex items-center justify-center z-50",children:[(0,b.jsx)(n.MessageCircle,{size:24}),w.some(a=>"admin"===a.sender_type&&!a.is_read)&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full"})]})}a.s(["default",()=>s],10620)},74195,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.usePathname)(),e=(0,d.useSearchParams)(),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(0);return((0,c.useEffect)(()=>{g(!0),i(30);let a=setTimeout(()=>i(60),100),b=setTimeout(()=>i(80),200),c=setTimeout(()=>{i(100),setTimeout(()=>{g(!1),i(0)},200)},300);return()=>{clearTimeout(a),clearTimeout(b),clearTimeout(c)}},[a,e]),f||0!==h)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed top-0 left-0 right-0 z-[9999] h-1 bg-transparent",children:(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-primary via-primary to-orange-400 transition-all duration-300 ease-out shadow-lg shadow-primary/50",style:{width:`${h}%`}})}),f&&h<100&&(0,b.jsx)("div",{className:"fixed inset-0 z-[9998] pointer-events-none",children:(0,b.jsx)("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-[1px] animate-pulse"})})]}):null}a.s(["default",()=>e])}];

//# sourceMappingURL=src_components_b8bf5532._.js.map