(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69638,e=>{"use strict";let s=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>s],69638)},63488,e=>{"use strict";let s=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>s],63488)},15788,e=>{"use strict";let s=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>s],15788)},46897,e=>{"use strict";let s=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>s],46897)},8495,e=>{"use strict";var s=e.i(71645),t=e.i(90615),a=e.i(46696);function l(e={}){let{onInsert:r,onUpdate:i,onDelete:n,showToasts:c=!0,filter:d}=e,o=(0,t.createClient)(),x=(0,s.useCallback)(e=>{let{eventType:s,new:t,old:l}=e;switch(s){case"INSERT":t&&r&&(r(t),c&&a.toast.success("New shipment created",{description:`Tracking: ${t.tracking_number}`}));break;case"UPDATE":t&&i&&(i(t),c&&a.toast.info("Shipment updated",{description:`${t.tracking_number} - ${t.status}`}));break;case"DELETE":l&&n&&(n(l),c&&a.toast.warning("Shipment removed"))}},[r,i,n,c]);(0,s.useEffect)(()=>{let e={event:"*",schema:"public",table:"shipments"},s=d?{...e,filter:`${d.column}=eq.${d.value}`}:e,t=o.channel("shipments-realtime").on("postgres_changes",s,x).subscribe(e=>{"SUBSCRIBED"===e&&console.log("Realtime subscription active for shipments")});return()=>{o.removeChannel(t)}},[o,x,d])}function r(e,l){let r=(0,t.createClient)();(0,s.useEffect)(()=>{if(!e)return;let s=r.channel(`shipment-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"shipments",filter:`tracking_number=eq.${e}`},e=>{e.new&&(l(e.new),a.toast.info("Shipment status updated!",{description:`Status: ${e.new.status}`}))}).subscribe();return()=>{r.removeChannel(s)}},[r,e,l])}e.s(["useRealtimeShipment",()=>r,"useRealtimeShipments",()=>l])},7233,e=>{"use strict";let s=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},84774,e=>{"use strict";var s=e.i(43476),t=e.i(75157);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,t.cn)("w-full caption-bottom text-sm",e),...a})})}function l({className:e,...a}){return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,t.cn)("[&_tr]:border-b",e),...a})}function r({className:e,...a}){return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,t.cn)("[&_tr:last-child]:border-0",e),...a})}function i({className:e,...a}){return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,t.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function n({className:e,...a}){return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,t.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function c({className:e,...a}){return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,t.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}e.s(["Table",()=>a,"TableBody",()=>r,"TableCell",()=>c,"TableHead",()=>n,"TableHeader",()=>l,"TableRow",()=>i])},86536,e=>{"use strict";let s=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},12426,e=>{"use strict";let s=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>s],12426)},80971,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(15288),l=e.i(87486),r=e.i(19455),i=e.i(84774),n=e.i(59684),c=e.i(3265),d=e.i(22016),o=e.i(88844),x=e.i(15788),m=e.i(69638),h=e.i(3116),p=e.i(7233),u=e.i(86536),b=e.i(46897),j=e.i(75254);let g=(0,j.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var f=e.i(12426);let N=(0,j.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var y=e.i(84614),v=e.i(63488),w=e.i(53475),k=e.i(76639),C=e.i(8495);function T({user:e,profile:j,shipments:T}){let[_,S]=(0,t.useState)(T),[D,z]=(0,t.useState)(!1),[M,H]=(0,t.useState)(null),P=(0,t.useCallback)(s=>{s.user_id===e.id&&S(e=>[s,...e])},[e.id]),B=(0,t.useCallback)(e=>{S(s=>s.map(s=>s.id===e.id?e:s)),M?.id===e.id&&H(e)},[M?.id]);(0,C.useRealtimeShipments)({onInsert:P,onUpdate:B,showToasts:!0,filter:{column:"user_id",value:e.id}});let $=(0,t.useMemo)(()=>({total:_.length,delivered:_.filter(e=>"delivered"===e.status).length,active:_.filter(e=>["in-transit","out-for-delivery","pending","accepted"].includes(e.status||"")).length}),[_]),R=e=>{switch(e){case"delivered":return"border-green-500 text-green-600 bg-green-50";case"in-transit":return"border-blue-500 text-blue-600 bg-blue-50";case"out-for-delivery":return"border-yellow-500 text-yellow-600 bg-yellow-50";case"held":return"border-red-500 text-red-600 bg-red-50";case"accepted":return"border-purple-500 text-purple-600 bg-purple-50";default:return"border-slate-500 text-slate-600 bg-slate-50"}};return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(c.default,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 pt-32 pb-20",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-secondary",children:["Welcome, ",j?.full_name||e.email]}),(0,s.jsxs)("span",{className:"flex items-center gap-1.5 px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:[(0,s.jsx)(w.Wifi,{size:12,className:"animate-pulse"}),"Live"]})]}),(0,s.jsx)("p",{className:"text-slate-500",children:"Manage and track your shipments"})]}),(0,s.jsx)(d.default,{href:"/ship",children:(0,s.jsxs)(r.Button,{className:"bg-primary hover:bg-primary/90 text-white rounded-full shadow-lg shadow-primary/20",children:[(0,s.jsx)(p.Plus,{className:"mr-2 h-4 w-4"}),"New Shipment"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,s.jsxs)(a.Card,{className:"glass border-0 shadow-lg",children:[(0,s.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.CardTitle,{className:"text-sm font-medium text-slate-500",children:"Total Shipments"}),(0,s.jsx)(o.Package,{className:"h-4 w-4 text-slate-400"})]}),(0,s.jsx)(a.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-secondary",children:$.total})})]}),(0,s.jsxs)(a.Card,{className:"glass border-0 shadow-lg",children:[(0,s.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.CardTitle,{className:"text-sm font-medium text-slate-500",children:"Active"}),(0,s.jsx)(x.Truck,{className:"h-4 w-4 text-primary"})]}),(0,s.jsx)(a.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:$.active})})]}),(0,s.jsxs)(a.Card,{className:"glass border-0 shadow-lg",children:[(0,s.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.CardTitle,{className:"text-sm font-medium text-slate-500",children:"Delivered"}),(0,s.jsx)(m.CheckCircle,{className:"h-4 w-4 text-green-500"})]}),(0,s.jsx)(a.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-green-500",children:$.delivered})})]})]}),(0,s.jsxs)(a.Card,{className:"glass border-0 shadow-lg overflow-hidden",children:[(0,s.jsxs)(a.CardHeader,{className:"border-b border-slate-100 bg-slate-50/30",children:[(0,s.jsx)(a.CardTitle,{className:"text-secondary",children:"Your Shipments"}),(0,s.jsx)(a.CardDescription,{className:"text-slate-500",children:0===_.length?"No shipments yet":`${_.length} shipment(s)`})]}),(0,s.jsx)(a.CardContent,{className:"p-0",children:0===_.length?(0,s.jsxs)("div",{className:"py-20 text-center",children:[(0,s.jsx)(o.Package,{className:"h-12 w-12 mx-auto text-slate-300 mb-4"}),(0,s.jsx)("p",{className:"text-slate-500 mb-4",children:"You haven't created any shipments yet"}),(0,s.jsx)(d.default,{href:"/ship",children:(0,s.jsx)(r.Button,{children:"Create Your First Shipment"})})]}):(0,s.jsxs)(n.ScrollArea,{className:"h-[400px]",children:[(0,s.jsx)("div",{className:"lg:hidden space-y-4 p-4",children:_.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-slate-100 p-4 shadow-sm hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Tracking Number"}),(0,s.jsx)("button",{onClick:()=>{H(e),z(!0)},className:"font-mono font-bold text-primary hover:underline text-sm",children:e.tracking_number})]}),(0,s.jsx)(l.Badge,{variant:"outline",className:`uppercase font-medium text-xs ${R(e.status)}`,children:e.status})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Recipient"}),(0,s.jsx)("p",{className:"text-sm font-medium text-secondary truncate",children:e.receiver_info?.name||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Date"}),(0,s.jsx)("p",{className:"text-sm font-medium text-secondary",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]})]}),(0,s.jsx)("div",{className:"pt-3 border-t border-slate-50 flex justify-end",children:(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",className:"w-full sm:w-auto",onClick:()=>{H(e),z(!0)},children:[(0,s.jsx)(u.Eye,{size:14,className:"mr-2"}),"View Details"]})})]},e.id))}),(0,s.jsx)("div",{className:"hidden lg:block overflow-x-auto",children:(0,s.jsxs)(i.Table,{children:[(0,s.jsx)(i.TableHeader,{className:"bg-slate-50",children:(0,s.jsxs)(i.TableRow,{className:"border-slate-100",children:[(0,s.jsx)(i.TableHead,{className:"text-slate-500 font-semibold min-w-[120px]",children:"Tracking ID"}),(0,s.jsx)(i.TableHead,{className:"text-slate-500 font-semibold min-w-[150px]",children:"Recipient"}),(0,s.jsx)(i.TableHead,{className:"text-slate-500 font-semibold min-w-[120px]",children:"Status"}),(0,s.jsx)(i.TableHead,{className:"text-slate-500 font-semibold min-w-[120px]",children:"Date"}),(0,s.jsx)(i.TableHead,{className:"text-right text-slate-500 font-semibold min-w-[100px]",children:"Action"})]})}),(0,s.jsx)(i.TableBody,{children:_.map(e=>(0,s.jsxs)(i.TableRow,{className:"border-slate-100 hover:bg-slate-50/50",children:[(0,s.jsx)(i.TableCell,{children:(0,s.jsx)("button",{onClick:()=>{H(e),z(!0)},className:"font-mono font-bold text-primary hover:underline whitespace-nowrap",children:e.tracking_number})}),(0,s.jsx)(i.TableCell,{className:"text-secondary whitespace-nowrap",children:e.receiver_info?.name||"N/A"}),(0,s.jsx)(i.TableCell,{children:(0,s.jsx)(l.Badge,{variant:"outline",className:`uppercase font-medium whitespace-nowrap ${R(e.status)}`,children:e.status})}),(0,s.jsx)(i.TableCell,{className:"text-slate-500 whitespace-nowrap",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,s.jsx)(i.TableCell,{className:"text-right",children:(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",className:"border-slate-200",onClick:()=>{H(e),z(!0)},children:[(0,s.jsx)(u.Eye,{size:14,className:"mr-1"}),"Details"]})})]},e.id))})]})})]})})]}),(0,s.jsx)(k.Dialog,{open:D,onOpenChange:z,children:(0,s.jsxs)(k.DialogContent,{className:"glass border-0 shadow-2xl max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(k.DialogHeader,{children:[(0,s.jsxs)(k.DialogTitle,{className:"text-secondary flex items-center gap-2",children:[(0,s.jsx)(o.Package,{className:"h-5 w-5"}),"Shipment Details"]}),(0,s.jsxs)(k.DialogDescription,{className:"text-slate-500",children:["Tracking ID: ",(0,s.jsx)("span",{className:"font-mono font-bold text-primary",children:M?.tracking_number})]})]}),M&&(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[(0,s.jsxs)("p",{className:"text-xs text-slate-500 mb-1 flex items-center gap-1",children:[(0,s.jsx)(h.Clock,{size:12})," Status"]}),(0,s.jsx)(l.Badge,{className:`${R(M.status)}`,children:M.status})]}),(0,s.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[(0,s.jsxs)("p",{className:"text-xs text-slate-500 mb-1 flex items-center gap-1",children:[(0,s.jsx)(g,{size:12})," Created"]}),(0,s.jsx)("p",{className:"font-medium text-secondary text-sm",children:new Date(M.created_at).toLocaleString()})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[(0,s.jsxs)("p",{className:"text-xs text-slate-500 mb-1 flex items-center gap-1",children:[(0,s.jsx)(f.DollarSign,{size:12})," Price"]}),(0,s.jsx)("p",{className:"font-bold text-lg text-secondary",children:M.price?`$${M.price.toFixed(2)}`:"Pending Quote"})]}),(0,s.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[(0,s.jsxs)("p",{className:"text-xs text-slate-500 mb-1 flex items-center gap-1",children:[(0,s.jsx)(N,{size:12})," Payment"]}),(0,s.jsx)(l.Badge,{variant:"paid"===M.payment_status?"default":"secondary",className:"paid"===M.payment_status?"bg-green-500 hover:bg-green-600":"",children:M.payment_status||"Unpaid"})]})]}),M.current_location&&(0,s.jsxs)("div",{className:"bg-blue-50/50 p-4 rounded-xl border border-blue-100",children:[(0,s.jsxs)("p",{className:"text-xs text-blue-500 font-semibold mb-2 flex items-center gap-1",children:[(0,s.jsx)(b.MapPin,{size:14})," Current Location"]}),(0,s.jsx)("p",{className:"text-secondary font-medium",children:M.current_location})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-slate-900 border-b pb-2 flex items-center gap-2",children:[(0,s.jsx)(y.User,{size:14,className:"text-slate-400"})," Sender"]}),(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsx)("p",{className:"font-medium text-secondary",children:M.sender_info?.name}),(0,s.jsx)("p",{className:"text-slate-500",children:M.sender_info?.address}),(0,s.jsx)("p",{className:"text-slate-500 text-xs",children:M.sender_info?.phone}),(0,s.jsxs)("p",{className:"text-slate-500 text-xs flex items-center gap-1",children:[(0,s.jsx)(v.Mail,{size:10})," ",M.sender_info?.email]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-slate-900 border-b pb-2 flex items-center gap-2",children:[(0,s.jsx)(y.User,{size:14,className:"text-slate-400"})," Receiver"]}),(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsx)("p",{className:"font-medium text-secondary",children:M.receiver_info?.name}),(0,s.jsx)("p",{className:"text-slate-500",children:M.receiver_info?.address}),(0,s.jsx)("p",{className:"text-slate-500 text-xs",children:M.receiver_info?.phone}),(0,s.jsxs)("p",{className:"text-slate-500 text-xs flex items-center gap-1",children:[(0,s.jsx)(v.Mail,{size:10})," ",M.receiver_info?.email]})]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-secondary mb-3 flex items-center gap-2",children:[(0,s.jsx)(o.Package,{size:14})," Parcel Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 text-sm gap-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Content:"})," ",(0,s.jsx)("span",{className:"text-secondary font-medium",children:M.parcel_details?.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Weight:"})," ",(0,s.jsxs)("span",{className:"text-secondary font-medium",children:[M.parcel_details?.weight," kg"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Dimensions:"})," ",(0,s.jsxs)("span",{className:"text-secondary font-medium",children:[M.parcel_details?.dimensions.length,"x",M.parcel_details?.dimensions.width,"x",M.parcel_details?.dimensions.height," cm"]})]})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 pt-4 border-t",children:(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>window.open(`/track/${M.tracking_number}`,"_blank"),children:[(0,s.jsx)(u.Eye,{size:14,className:"mr-1"})," View Tracking Page"]})})]})]})})]})]})}e.s(["default",()=>T],80971)}]);