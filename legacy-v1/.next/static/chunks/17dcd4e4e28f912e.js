(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17521,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t])},31278,e=>{"use strict";var t=e.i(17521);e.s(["Loader2",()=>t.default])},95187,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={callServer:function(){return i.callServer},createServerReference:function(){return n.createServerReference},findSourceMapURL:function(){return l.findSourceMapURL}};for(var r in s)Object.defineProperty(a,r,{enumerable:!0,get:s[r]});let i=e.r(32120),l=e.r(92245),n=e.r(35326)},55593,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function s({className:e,type:s,...r}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(74080);var s=e.i(91918),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let i=(0,s.createSlot)(`Primitive.${r}`),l=a.forwardRef((e,a)=>{let{asChild:s,...l}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?i:r,{...l,ref:a})});return l.displayName=`Primitive.${r}`,{...e,[r]:l}},{}),i=a.forwardRef((e,a)=>(0,t.jsx)(r.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=e.i(75157);function n({className:e,...a}){return(0,t.jsx)(i,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>n],10204)},18566,(e,t,a)=>{t.exports=e.r(76562)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},94983,e=>{"use strict";let t=(0,e.i(75254).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);e.s(["MessageCircle",()=>t],94983)},23287,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["default",()=>t])},76630,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("781dce578e8850f3344c600f141f5999ba6b9b7064",t.callServer,void 0,t.findSourceMapURL,"sendChatMessage");e.s(["sendChatMessage",()=>a])},96604,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("4025a0ee08735742c2e4d64b5ee759f70a786392ad",t.callServer,void 0,t.findSourceMapURL,"getChatMessages");e.s(["getChatMessages",()=>a])},13354,e=>{"use strict";var t=e.i(43476),a=e.i(23287),a=a,s=e.i(75254);let r=(0,s.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var i=e.i(17521),i=i;let l=(0,s.default)("octagon-x",[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),n=(0,s.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var o=e.i(71645),d=(e,t,a,s,r,i,l,n)=>{let o=document.documentElement,d=["light","dark"];function c(t){var a;(Array.isArray(e)?e:[e]).forEach(e=>{let a="class"===e,s=a&&i?r.map(e=>i[e]||e):r;a?(o.classList.remove(...s),o.classList.add(i&&i[t]?i[t]:t)):o.setAttribute(e,t)}),a=t,n&&d.includes(a)&&(o.style.colorScheme=a)}if(s)c(s);else try{let e=localStorage.getItem(t)||a,s=l&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(s)}catch(e){}},c=o.createContext(void 0),m={setTheme:e=>{},themes:[]};o.memo(({forcedTheme:e,storageKey:t,attribute:a,enableSystem:s,enableColorScheme:r,defaultTheme:i,value:l,themes:n,nonce:c,scriptProps:m})=>{let u=JSON.stringify([a,t,i,e,n,l,s,r]).slice(1,-1);return o.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"u"<typeof window?c:"",dangerouslySetInnerHTML:{__html:`(${d.toString()})(${u})`}})});var u=e.i(46696);let h=({...e})=>{var s;let{theme:d="system"}=null!=(s=o.useContext(c))?s:m;return(0,t.jsx)(u.Toaster,{theme:d,className:"toaster group",icons:{success:(0,t.jsx)(a.default,{className:"size-4"}),info:(0,t.jsx)(r,{className:"size-4"}),warning:(0,t.jsx)(n,{className:"size-4"}),error:(0,t.jsx)(l,{className:"size-4"}),loading:(0,t.jsx)(i.default,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...e})};e.s(["Toaster",()=>h],13354)},20273,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(90615),r=e.i(95187);let i=(0,r.createServerReference)("601a54e1e61ebec4ee8d22d385482431483c383d59",r.callServer,void 0,r.findSourceMapURL,"createChatSession");var l=e.i(76630),n=e.i(96604),o=e.i(19455),d=e.i(55593),c=e.i(10204),m=e.i(15288),u=e.i(46696),h=e.i(94983),p=e.i(37727),f=e.i(14764),x=e.i(31278);let g=(0,e.i(75254).default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]);function v(){let[e,r]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(null),[w,S]=(0,a.useState)([]),[N,C]=(0,a.useState)(""),[k,M]=(0,a.useState)(!1),[z,T]=(0,a.useState)(!1),[I,L]=(0,a.useState)(""),[R,_]=(0,a.useState)(""),[E,P]=(0,a.useState)(!1),$=(0,a.useRef)(null),A=(0,s.createClient)(),V=async e=>{M(!0),S(await (0,n.getChatMessages)(e)),M(!1)};(0,a.useEffect)(()=>{$.current?.scrollIntoView({behavior:"smooth"})},[w]),(0,a.useEffect)(()=>{let e=localStorage.getItem("chatSessionId"),t=localStorage.getItem("chatVisitorName"),a=localStorage.getItem("chatVisitorEmail");e&&t&&a&&(j(e),L(t),_(a),P(!0),V(e))},[]),(0,a.useEffect)(()=>{if(!y)return;let t=A.channel(`chat-${y}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`session_id=eq.${y}`},t=>{let a=t.new;S(e=>e.some(e=>e.id===a.id)?e:[...e,a]),"admin"!==a.sender_type||e||u.toast.info("New message from support!",{action:{label:"View",onClick:()=>{r(!0),b(!1)}}})}).subscribe();return()=>{A.removeChannel(t)}},[y,A,e]);let D=async e=>{if(e.preventDefault(),!I.trim()||!R.trim())return void u.toast.error("Please enter your name and email");M(!0);let t=await i(I,R);if(t.error){u.toast.error(t.error),M(!1);return}t.session&&(j(t.session.id),P(!0),localStorage.setItem("chatSessionId",t.session.id),localStorage.setItem("chatVisitorName",I),localStorage.setItem("chatVisitorEmail",R),u.toast.success("Chat started! An agent will be with you shortly.")),M(!1)},U=async e=>{if(e.preventDefault(),!N.trim()||!y)return;T(!0);let t=await (0,l.sendChatMessage)(y,N,"visitor",I);t.error?u.toast.error(t.error):C(""),T(!1)};return e?(0,t.jsx)("div",{className:`fixed bottom-6 right-6 z-50 transition-all ${v?"w-72":"w-80 sm:w-96"}`,children:(0,t.jsxs)(m.Card,{className:"shadow-2xl border-0 overflow-hidden",children:[(0,t.jsxs)(m.CardHeader,{className:"bg-primary text-white p-4 flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.MessageCircle,{size:20}),(0,t.jsx)(m.CardTitle,{className:"text-base font-semibold",children:"Live Support"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>b(!v),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:(0,t.jsx)(g,{size:16})}),(0,t.jsx)("button",{onClick:()=>r(!1),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:(0,t.jsx)(p.X,{size:16})})]})]}),!v&&(0,t.jsx)(m.CardContent,{className:"p-0",children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"h-80 overflow-y-auto p-4 space-y-3 bg-slate-50",children:[k?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)(x.Loader2,{className:"h-6 w-6 animate-spin text-slate-400"})}):0===w.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 text-sm",children:[(0,t.jsx)(h.MessageCircle,{size:32,className:"mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No messages yet"}),(0,t.jsx)("p",{children:"Send a message to start the conversation"})]}):w.map(e=>(0,t.jsx)("div",{className:`flex ${"visitor"===e.sender_type?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${"visitor"===e.sender_type?"bg-primary text-white rounded-br-md":"bg-white text-slate-800 shadow-sm border rounded-bl-md"}`,children:["admin"===e.sender_type&&(0,t.jsx)("p",{className:"text-xs text-primary font-medium mb-1",children:e.sender_name||"Support"}),(0,t.jsx)("p",{className:"text-sm",children:e.message}),(0,t.jsx)("p",{className:`text-xs mt-1 ${"visitor"===e.sender_type?"text-white/70":"text-slate-400"}`,children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)),(0,t.jsx)("div",{ref:$})]}),(0,t.jsxs)("form",{onSubmit:U,className:"p-3 border-t bg-white flex gap-2",children:[(0,t.jsx)(d.Input,{value:N,onChange:e=>C(e.target.value),placeholder:"Type a message...",className:"flex-1",disabled:z}),(0,t.jsx)(o.Button,{type:"submit",size:"icon",disabled:z||!N.trim(),children:z?(0,t.jsx)(x.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(f.Send,{size:18})})]}),(0,t.jsx)("div",{className:"p-2 border-t bg-slate-50",children:(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("chatSessionId"),localStorage.removeItem("chatVisitorName"),localStorage.removeItem("chatVisitorEmail"),j(null),P(!1),S([]),L(""),_(""),r(!1)},className:"w-full text-xs text-slate-500 hover:text-red-500 transition-colors",children:"End Chat Session"})})]}):(0,t.jsxs)("form",{onSubmit:D,className:"p-4 space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-slate-600",children:"Please provide your details to start chatting with our support team."}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"chat-name",children:"Full Name"}),(0,t.jsx)(d.Input,{id:"chat-name",value:I,onChange:e=>L(e.target.value),placeholder:"John Doe",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"chat-email",children:"Email"}),(0,t.jsx)(d.Input,{id:"chat-email",type:"email",value:R,onChange:e=>_(e.target.value),placeholder:"john@example.com",required:!0})]}),(0,t.jsx)(o.Button,{type:"submit",className:"w-full",disabled:k,children:k?(0,t.jsx)(x.Loader2,{className:"h-4 w-4 animate-spin"}):"Start Chat"})]})})]})}):(0,t.jsxs)("button",{onClick:()=>r(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary text-white rounded-full shadow-lg hover:bg-primary/90 transition-all hover:scale-105 flex items-center justify-center z-50",children:[(0,t.jsx)(h.MessageCircle,{size:24}),w.some(e=>"admin"===e.sender_type&&!e.is_read)&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full"})]})}e.s(["default",()=>v],20273)},6372,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566);function r(){let e=(0,s.usePathname)(),r=(0,s.useSearchParams)(),[i,l]=(0,a.useState)(!1),[n,o]=(0,a.useState)(0);return((0,a.useEffect)(()=>{l(!0),o(30);let e=setTimeout(()=>o(60),100),t=setTimeout(()=>o(80),200),a=setTimeout(()=>{o(100),setTimeout(()=>{l(!1),o(0)},200)},300);return()=>{clearTimeout(e),clearTimeout(t),clearTimeout(a)}},[e,r]),i||0!==n)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed top-0 left-0 right-0 z-[9999] h-1 bg-transparent",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-primary via-primary to-orange-400 transition-all duration-300 ease-out shadow-lg shadow-primary/50",style:{width:`${n}%`}})}),i&&n<100&&(0,t.jsx)("div",{className:"fixed inset-0 z-[9998] pointer-events-none",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-[1px] animate-pulse"})})]}):null}e.s(["default",()=>r])}]);