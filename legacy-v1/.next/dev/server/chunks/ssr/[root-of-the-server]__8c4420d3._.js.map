{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/Patriot%202TB/Dev%20Test/perfectexpress-courier/src/lib/email.ts"],"sourcesContent":["import { Resend } from 'resend';\n\nconst resend = new Resend(process.env.RESEND_API_KEY);\nconst FROM_EMAIL = 'PerfectExpress <onboarding@resend.dev>';\nconst APP_URL = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';\n\n// Professional Email Wrap\nconst emailWrapper = (content: string) => `\n<div style=\"font-family: sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #f0f0f0; border-radius: 12px;\">\n    <div style=\"text-align: center; margin-bottom: 24px;\">\n        <h1 style=\"color: #1a2b3c; margin: 0; font-size: 24px;\">PerfectExpress Courier</h1>\n        <p style=\"color: #64748b; font-size: 14px; margin-top: 4px;\">Swift. Secure. Reliable.</p>\n    </div>\n    <div style=\"color: #334155; line-height: 1.6;\">\n        ${content}\n    </div>\n    <div style=\"margin-top: 40px; padding-top: 20px; border-top: 1px solid #f0f0f0; text-align: center; color: #94a3b8; font-size: 12px;\">\n        <p>Â© ${new Date().getFullYear()} PerfectExpress Courier Service. All rights reserved.</p>\n        <p>This is an automated notification. Please do not reply to this email.</p>\n    </div>\n</div>\n`;\n\n// Notify receiver that a package is on its way\nexport async function sendShipmentReceiverNotification(to: string, trackingNumber: string, receiverName: string, senderName: string) {\n    const html = emailWrapper(`\n        <h2 style=\"color: #1e293b;\">A Package is Coming Your Way! ðŸ“¦</h2>\n        <p>Hello <strong>${receiverName}</strong>,</p>\n        <p><strong>${senderName}</strong> has initiated a shipment to you via PerfectExpress Courier.</p>\n        <div style=\"background: #f8fafc; padding: 16px; border-radius: 8px; margin: 20px 0;\">\n            <p style=\"margin: 0; color: #64748b; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em;\">Tracking ID</p>\n            <p style=\"margin: 4px 0 0; font-family: monospace; font-size: 18px; font-weight: bold; color: #3b82f6;\">${trackingNumber}</p>\n        </div>\n        <p>You can track this shipment at any time using the button below. We'll notify you of any updates.</p>\n        <div style=\"text-align: center; margin-top: 32px;\">\n            <a href=\"${APP_URL}/track/${trackingNumber}\" style=\"background: #1a2b3c; color: white; padding: 12px 24px; border-radius: 24px; text-decoration: none; font-weight: bold;\">Track Package</a>\n        </div>\n    `);\n\n    return resend.emails.send({\n        from: FROM_EMAIL,\n        to: [to],\n        subject: `Package Alert: ${senderName} is sending you a package`,\n        html: html,\n    });\n}\n\n// Notify when payment is confirmed and shipment is ready for dispatch\nexport async function sendPaymentConfirmedEmail(to: string, trackingNumber: string, recipientName: string) {\n    const html = emailWrapper(`\n        <h2 style=\"color: #1e293b;\">Payment Confirmed! âœ…</h2>\n        <p>Hello <strong>${recipientName}</strong>,</p>\n        <p>Payment for shipment <strong>${trackingNumber}</strong> has been confirmed and processed.</p>\n        <div style=\"background: #f0fdf4; padding: 16px; border-radius: 8px; border: 1px solid #bbfcce; margin: 20px 0;\">\n            <p style=\"margin: 0; color: #166534; font-size: 14px;\">Status</p>\n            <p style=\"margin: 4px 0 0; font-size: 18px; font-weight: bold; color: #15803d;\">Ready for Dispatch</p>\n        </div>\n        <p>Your package will be dispatched soon. You'll receive another notification once it's on the way.</p>\n        <div style=\"text-align: center; margin-top: 32px;\">\n            <a href=\"${APP_URL}/track/${trackingNumber}\" style=\"background: #15803d; color: white; padding: 12px 24px; border-radius: 24px; text-decoration: none; font-weight: bold;\">Track Shipment</a>\n        </div>\n    `);\n\n    return resend.emails.send({\n        from: FROM_EMAIL,\n        to: [to],\n        subject: `Payment Confirmed: Shipment ${trackingNumber}`,\n        html: html,\n    });\n}\n\nexport async function sendShipmentCreatedEmail(to: string, trackingNumber: string, senderName: string) {\n    const html = emailWrapper(`\n        <h2 style=\"color: #1e293b;\">Shipment Request Received</h2>\n        <p>Hello <strong>${senderName}</strong>,</p>\n        <p>Your shipment request has been successfully created. Our team is currently reviewing the details to provide you with a quote.</p>\n        <div style=\"background: #f8fafc; padding: 16px; border-radius: 8px; margin: 20px 0;\">\n            <p style=\"margin: 0; color: #64748b; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em;\">Draft Tracking ID</p>\n            <p style=\"margin: 4px 0 0; font-family: monospace; font-size: 18px; font-weight: bold; color: #3b82f6;\">${trackingNumber}</p>\n        </div>\n        <p>Wait for a follow-up email once your shipment is approved and the price is set.</p>\n        <div style=\"text-align: center; margin-top: 32px;\">\n            <a href=\"${APP_URL}/track/${trackingNumber}\" style=\"background: #1a2b3c; color: white; padding: 12px 24px; border-radius: 24px; text-decoration: none; font-weight: bold;\">Track My Request</a>\n        </div>\n    `);\n\n    return resend.emails.send({\n        from: FROM_EMAIL,\n        to: [to],\n        subject: `Shipment Created: ${trackingNumber}`,\n        html: html,\n    });\n}\n\nexport async function sendShipmentApprovedEmail(to: string, trackingNumber: string, price: number) {\n    const html = emailWrapper(`\n        <h2 style=\"color: #1e293b;\">Shipment Approved & Quote Ready</h2>\n        <p>Great news! Your shipment request has been approved.</p>\n        <div style=\"background: #f0fdf4; padding: 16px; border-radius: 8px; border: 1px solid #bbfcce; margin: 20px 0;\">\n             <p style=\"margin: 0; color: #166534; font-size: 14px;\">Total Shipping Cost</p>\n             <p style=\"margin: 4px 0 0; font-size: 24px; font-weight: bold; color: #15803d;\">$${price.toFixed(2)}</p>\n        </div>\n        <p>Please log in to your dashboard to complete the payment. Your package will be dispatched immediately once payment is confirmed.</p>\n        <div style=\"text-align: center; margin-top: 32px;\">\n            <a href=\"${APP_URL}/dashboard\" style=\"background: #15803d; color: white; padding: 12px 24px; border-radius: 24px; text-decoration: none; font-weight: bold;\">Make Payment</a>\n        </div>\n        <p style=\"font-size: 13px; color: #64748b; margin-top: 24px;\">Tracking ID: ${trackingNumber}</p>\n    `);\n\n    return resend.emails.send({\n        from: FROM_EMAIL,\n        to: [to],\n        subject: `Payment Required: Shipment ${trackingNumber}`,\n        html: html,\n    });\n}\n\nexport async function sendShipmentDispatchedEmail(to: string, trackingNumber: string, origin: string) {\n    const html = emailWrapper(`\n        <h2 style=\"color: #1e293b;\">Your Package is on the Way! ðŸš€</h2>\n        <p>Your shipment has been dispatched from our facility and is now in transit.</p>\n        <div style=\"border-left: 4px solid #3b82f6; padding-left: 16px; margin: 20px 0;\">\n            <p style=\"margin: 0; color: #64748b; font-size: 14px;\">Current Status</p>\n            <p style=\"margin: 4px 0 0; font-weight: bold; color: #1e293b;\">In Transit</p>\n            <p style=\"margin: 8px 0 0; color: #64748b; font-size: 14px;\">Location</p>\n            <p style=\"margin: 4px 0 0; font-weight: bold; color: #1e293b;\">${origin}</p>\n        </div>\n        <div style=\"text-align: center; margin-top: 32px;\">\n            <a href=\"${APP_URL}/track/${trackingNumber}\" style=\"background: #3b82f6; color: white; padding: 12px 24px; border-radius: 24px; text-decoration: none; font-weight: bold;\">Live Tracking</a>\n        </div>\n    `);\n\n    return resend.emails.send({\n        from: FROM_EMAIL,\n        to: [to],\n        subject: `Dispatched: Your package ${trackingNumber} is moving!`,\n        html: html,\n    });\n}\n\nexport async function sendShipmentStatusUpdateEmail(to: string, trackingNumber: string, status: string, location: string, note?: string) {\n    const html = emailWrapper(`\n        <h2 style=\"color: #1e293b;\">Delivery Status Update</h2>\n        <p>There is a new update for your shipment <strong>${trackingNumber}</strong>.</p>\n        <div style=\"background: #f8fafc; padding: 20px; border-radius: 12px; margin: 20px 0;\">\n            <div style=\"margin-bottom: 12px;\">\n                <span style=\"color: #64748b; font-size: 12px; text-transform: uppercase;\">New Status:</span>\n                <span style=\"display: block; font-weight: bold; color: #1e293b; font-size: 16px;\">${status.toUpperCase()}</span>\n            </div>\n            <div style=\"margin-bottom: 12px;\">\n                <span style=\"color: #64748b; font-size: 12px; text-transform: uppercase;\">Location:</span>\n                <span style=\"display: block; font-weight: bold; color: #1e293b;\">${location}</span>\n            </div>\n            ${note ? `\n            <div>\n                <span style=\"color: #64748b; font-size: 12px; text-transform: uppercase;\">Note:</span>\n                <p style=\"margin: 4px 0 0; color: #334155;\">${note}</p>\n            </div>\n            ` : ''}\n        </div>\n        <div style=\"text-align: center; margin-top: 32px;\">\n            <a href=\"${APP_URL}/track/${trackingNumber}\" style=\"background: #1a2b3c; color: white; padding: 12px 24px; border-radius: 24px; text-decoration: none; font-weight: bold;\">View Details</a>\n        </div>\n    `);\n\n    return resend.emails.send({\n        from: FROM_EMAIL,\n        to: [to],\n        subject: `Update: Shipment ${trackingNumber} - ${status}`,\n        html: html,\n    });\n}\n\nexport async function sendShipmentDeliveredEmail(to: string, trackingNumber: string) {\n    const html = emailWrapper(`\n        <h2 style=\"color: #1a2b3c; text-align: center;\">Package Delivered! ðŸŽ‰</h2>\n        <p style=\"text-align: center;\">Your shipment <strong>${trackingNumber}</strong> has been successfully delivered.</p>\n        <div style=\"text-align: center; margin: 30px 0;\">\n            <div style=\"font-size: 60px;\">ðŸ“¦âœ…</div>\n        </div>\n        <p>Thank you for choosing PerfectExpress. We hope you are satisfied with our service!</p>\n        <div style=\"text-align: center; margin-top: 32px;\">\n            <a href=\"${APP_URL}/track/${trackingNumber}\" style=\"background: #1a2b3c; color: white; padding: 12px 24px; border-radius: 24px; text-decoration: none; font-weight: bold;\">View Delivery History</a>\n        </div>\n    `);\n\n    return resend.emails.send({\n        from: FROM_EMAIL,\n        to: [to],\n        subject: `Delivered: Shipment ${trackingNumber}`,\n        html: html,\n    });\n}\n\n// Support Ticket Email Notifications\n\nexport async function sendTicketReplyNotification(\n    to: string, \n    ticketNumber: string, \n    subject: string, \n    replyMessage: string,\n    senderType: 'admin' | 'customer'\n) {\n    const isAdminReply = senderType === 'admin'\n    \n    const html = emailWrapper(`\n        <h2 style=\"color: #1e293b;\">New Reply to Your Support Ticket</h2>\n        <p>There's a new response to your support ticket.</p>\n        <div style=\"background: #f8fafc; padding: 16px; border-radius: 8px; margin: 20px 0;\">\n            <p style=\"margin: 0; color: #64748b; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em;\">Ticket</p>\n            <p style=\"margin: 4px 0 0; font-family: monospace; font-size: 16px; font-weight: bold; color: #3b82f6;\">${ticketNumber}</p>\n            <p style=\"margin: 12px 0 0; color: #64748b; font-size: 12px; text-transform: uppercase;\">Subject</p>\n            <p style=\"margin: 4px 0 0; font-weight: 600; color: #1e293b;\">${subject}</p>\n        </div>\n        <div style=\"background: ${isAdminReply ? '#f0f9ff' : '#f0fdf4'}; padding: 16px; border-radius: 8px; border-left: 4px solid ${isAdminReply ? '#3b82f6' : '#22c55e'}; margin: 20px 0;\">\n            <p style=\"margin: 0; color: #64748b; font-size: 12px; text-transform: uppercase;\">\n                ${isAdminReply ? 'Support Team Response' : 'Customer Reply'}\n            </p>\n            <p style=\"margin: 8px 0 0; color: #334155; line-height: 1.6;\">${replyMessage}</p>\n        </div>\n        <div style=\"text-align: center; margin-top: 32px;\">\n            <a href=\"${APP_URL}/support\" style=\"background: #1a2b3c; color: white; padding: 12px 24px; border-radius: 24px; text-decoration: none; font-weight: bold;\">View Ticket</a>\n        </div>\n    `);\n\n    return resend.emails.send({\n        from: FROM_EMAIL,\n        to: [to],\n        subject: `[${ticketNumber}] New Reply: ${subject}`,\n        html: html,\n    });\n}\n\nexport async function sendTicketCreatedEmail(to: string, ticketNumber: string, subject: string) {\n    const html = emailWrapper(`\n        <h2 style=\"color: #1e293b;\">Support Ticket Created</h2>\n        <p>Thank you for contacting PerfectExpress support. We've received your request and will respond as soon as possible.</p>\n        <div style=\"background: #f8fafc; padding: 16px; border-radius: 8px; margin: 20px 0;\">\n            <p style=\"margin: 0; color: #64748b; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em;\">Your Ticket Number</p>\n            <p style=\"margin: 4px 0 0; font-family: monospace; font-size: 20px; font-weight: bold; color: #3b82f6;\">${ticketNumber}</p>\n            <p style=\"margin: 16px 0 0; color: #64748b; font-size: 12px; text-transform: uppercase;\">Subject</p>\n            <p style=\"margin: 4px 0 0; font-weight: 600; color: #1e293b;\">${subject}</p>\n        </div>\n        <p>You can view and respond to this ticket at any time by visiting our support center.</p>\n        <div style=\"text-align: center; margin-top: 32px;\">\n            <a href=\"${APP_URL}/support\" style=\"background: #1a2b3c; color: white; padding: 12px 24px; border-radius: 24px; text-decoration: none; font-weight: bold;\">View Support Center</a>\n        </div>\n    `);\n\n    return resend.emails.send({\n        from: FROM_EMAIL,\n        to: [to],\n        subject: `Ticket Created: ${ticketNumber} - ${subject}`,\n        html: html,\n    });\n}\n"],"names":[],"mappings":"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"}}]
}